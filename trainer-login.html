<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Trainer Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: Arial; background:#f3f4f6; display:flex; justify-content:center;
           align-items:center; height:100vh; margin:0; }
    .box { background:white; padding:30px; border-radius:12px; width:320px;
           box-shadow:0 10px 25px rgba(0,0,0,0.15); text-align:center; }
    input { width:100%; padding:10px; margin-top:10px; border-radius:8px;
            border:1px solid #ccc; font-size:1rem; }
    button { width:100%; padding:10px; margin-top:15px; background:#2563eb; color:white;
             border:none; border-radius:8px; font-size:1rem; cursor:pointer; }
    #error { color:red; margin-top:10px; font-size:0.9rem; }
  </style>
</head>

<body>
<div class="box">
  <h2>Trainer Login</h2>

  <form id="loginForm">
    <input id="pw" type="password" placeholder="Enter password" required />
    <button type="submit">Login</button>
    <div id="error"></div>
  </form>
</div>

<script>
const STORED_HASH = "7c376fc4dbe92142bcc71ed3b314301cf495e7d91d72c6d0252bae3550625a76";

async function hashPassword(pw) {
  const enc = new TextEncoder().encode(pw);
  const buf = await crypto.subtle.digest("SHA-256", enc);
  return Array.from(new Uint8Array(buf))
              .map(b => b.toString(16).padStart(2, "0"))
              .join("");
}

document.getElementById("loginForm").addEventListener("submit", async (e) => {
  e.preventDefault(); // prevent form reload

  const inputPw = document.getElementById("pw").value.trim();
  const hashed = await hashPassword(inputPw);

  if (hashed === STORED_HASH) {
    localStorage.setItem("trainerAuthenticated", "true");
    window.location.href = "QuizBuilder.html";   // <--- FIXED
  } else {
    document.getElementById("error").textContent = "Incorrect password.";
  }
});
</script>

</body>
</html>
